---
nav:
  title: 示例
  order: 1
  second: Shader 着色器
group:
  title: Shader 基础
  order: 0
title: Shader 方法
order: 1
demo:
  cols: 2
---


## Shader 方法

:::info
注：为了显示更好的语法高亮，以下 `shader` 代码都被标记为了 `C语言`
:::

### `abs` 取绝对值

##### 函数描述

```c
float abs(float x);
```
该函数接收一个参数x，并返回它的绝对值。如果x为负数，则返回其相反数。如果x为正数，则返回x本身。

##### 参数x: 

需要取绝对值的数值。可以是任何可实现类型。

##### 返回值

返回值为x的绝对值。

##### 示例

```c
float a = abs(-5.0);// a = 5.0
float b = abs(3.0);// b = 3.0
```

##### 注意事项

如果x是一个整数，则计算时会自动将其转换为float类型。


### `acos` 反余弦函数

##### 函数描述

acos() 函数返回一个角度值，代表反余弦值。

```c
float acos(float x);
```

##### 参数x: 

必需。要计算反余弦值的角度值，取值范围为 [-1, 1]。

##### 返回值

计算出反余弦值的角度值，取值范围为 [0, pi]。描述acos() 函数是数学库中的标准三角函数，它返回的是反余弦值。该函数的参数 x 必须在取值范围 [-1, 1] 内，否则函数将返回 NaN。如果角度值是正数，则返回值在 [0, pi/2] 内。如果角度值是负数，则返回值在 [pi/2, pi] 内。如果角度值为0，则返回值为 pi/2。需要注意的是，输入的参数 x 可能存在精度误差，这可能会影响 acos() 函数的计算结果。

##### 示例

```c
float x = 0.5;
float angle = acos(x); // 等价于 angle = cos(angle)
// 将角度值转换为弧度值
float pi = 3.14159265359;
float radian = angle * pi / 180.0;
// 使用弧度值计算余弦值
float cosine = cos(radian);
```

##### 注意事项

版本OpenGL ES 2.0、3.0，OpenGL 2.0、3.0。

### `acosh` 反双曲余弦函数

##### 函数描述

```c
float acosh(float x);
```

acosh函数返回一个参数的反双曲余弦函数。

##### 参数x: 

一个浮点数，指定要计算反双曲余弦函数的数值。

##### 返回值

返回类型为float，表示参数的反双曲余弦函数的值。如果x小于1，则返回NaN。

##### 示例

```c
float acoshValue = acosh(2.0); // 1.317
```

##### 注意事项

acosh函数只能用于GLSL 1.30及以上版本，因为这个函数是在OpenGL 3.0中引入的。如果x小于1，则函数将返回NaN。在GLSL中，反双曲余弦函数可以通过以下公式进行计算：acosh(x) = ln(x + sqrt(x^2 - 1))

### `all` 返回一个bool值，指示是否所有的值都为真

##### 函数描述

all()函数是一种逻辑函数，用于测试给定的布尔向量中的所有元素是否均为true。 如果所有元素都为true，则函数返回true；否则，返回false。

```c
bool all(bvec2 x);
bool all(bvec3 x);
bool all(bvec4 x);
```

##### 参数x: 

布尔向量

##### 返回值

如果向量中的所有元素都为true，则返回true；否则返回false。

##### 示例

以下是一个简单的GLSL代码示例，展示了如何使用all()函数。

```c
vec3 lightPosition = vec3(0.0, 1.0, 0.0);
vec3 surfacePosition = vec3(0.0, 0.0, 0.0);
vec3 surfaceNormal = vec3(0.0, 1.0, 0.0);
bool shadowExists = texture(shadowMap, shadowCoord).r < shadowCoord.z; // 判断表达式是否为true
if (all(bvec2(shadowExists, surfaceNormal.y > 0.0))) {
  vec3 lightDirection = normalize(lightPosition - surfacePosition);
  float diffuse = max(dot(surfaceNormal, lightDirection), 0.0);
  color = vec4(diffuse * surfaceColor.rgb, surfaceColor.a);
} else {
  color = vec4(surfaceColor.rgb * 0.1, surfaceColor.a);
}
```

在上面的示例中，all()函数用于判断变量shadowExists和表达式surfaceNormal.y > 0.0是否均为true。如果这两个条件都为true，则将计算光与表面之间的漫反射着色。否则，将表面颜色减少到原来的10％。

### `any` 返回一个bool值，指示是否有任何一个值为真

##### 函数描述

any()函数用于判断给定的布尔类型的变量中是否有任意一个为true。如果至少有一个为true，则该函数返回true，否则返回false。

```c
bool any(bvec2 x);
bool any(bvec3 x);
bool any(bvec4 x);
```

##### 参数x: 

一个bvec2、bvec3或bvec4类型的布尔类型向量。

##### 返回值

- true：如果给定向量中至少有一个元素为 true
- false：如果给定向量中全部元素为 false

##### 示例

```c
bvec3 testvec = bvec3(true, false, true);
bool result = any(testvec); // result 为 true
bvec4 testvec = bvec4(false, false, false, false);
bool result = any(testvec); // result 为 false
```

##### 注意事项

此函数仅适用于布尔类型向量（bvec2、bvec3和bvec4）。当传递给函数的向量为空时，结果为false。可以与其他操作符（如&&和||）一起使用，以构建更复杂的布尔逻辑。

### `asin` 反正弦函数

##### 函数描述

asin()函数返回弧度制下的反正弦值。

```c
float asin(float x);
```

##### 参数x: 

待求反正弦值的数值，范围必须在 [-1, 1] 内。

##### 返回值

返回反正弦值，单位为弧度。

##### 示例

```c
vec2 uv = gl_FragCoord.xy / resolution.xy;
float x = uv.x * 2.0 - 1.0; // 把纹理坐标转化为 [-1, 1] 之间的数值
float y = uv.y * 2.0 - 1.0; // 把纹理坐标转化为 [-1, 1] 之间的数值
float angle = asin(y); // 计算角度，单位为弧度
gl_FragColor = vec4(vec3(angle / 3.1415926, 1.0), 1.0); // 把角度转化为颜色值
```

##### 注意事项

参数范围必须在 [-1, 1] 内，否则会报错误；返回值单位为弧度，需要转化为度数或者其他角度单位，才能被业务逻辑所使用。

### `asinh` 反双曲正弦函数

##### 函数描述

asinh() 函数将输入数值转换成双曲正弦反函数的值。其定义为：`asinh(x) = ln(x + sqrt(x^2 + 1))`。

```c
float asinh(float x);
```

##### 参数x: 



##### 返回值

返回参数 x 的双曲正弦反函数的值。

##### 示例

```c
float a = asinh(2.0); // 1.4436355
float b = asinh(0.0); // 0.0
float c = asinh(-3.0); // -1.81844657
```

##### 注意事项

参数 x 的取值范围为 `[-inf, +inf]`。函数返回的值的取值范围为 `[-inf, +inf]`。当 x 的绝对值很小时， `asinh(x)` 的值很接近于 `x`。当 x 的绝对值很大时，`asinh(x)` 的值将接近于 `ln(2 * abs(x))`。

### `atan` 反正切函数

##### 函数描述

```c
float atan(float y_over_x);
```

`atan()` 函数返回 `y_over_x` 的反正切值，返回的值范围在 `-pi/2` 到 `pi/2` 之间。

##### 参数y_over_x: 

要计算反正切的浮点数。

##### 返回值

函数返回 y_over_x 的反正切值。返回值的单位为弧度。

##### 示例

```c
vec2 point = vec2(1.0, 1.0);
float angle = atan(point.y / point.x);
```

在上面的示例中，我们计算了 (1, 1) 点相对于原点的极角。

##### 注意事项

atan() 函数对所有输入值均有效。atan() 函数可用于计算点与原点之间的极角。

### `atanh` 反双曲正切函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `ceil` 向上取整

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `clamp` 将值限制在指定的范围内

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `cos` 余弦函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `cosh` 双曲余弦函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `cross` 计算向量叉积

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `dFdx` 返回一个向量或标量的x分量的导数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `dFdy` 返回一个向量或标量的y分量的导数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `degrees` 将弧度转换为角度

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `determinant` 计算矩阵的行列式

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `distance` 计算两个向量之间的距离

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `dot` 计算两个向量的点积

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `equal` 检查两个参数是否相等

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `exp` 计算自然指数函数的值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `exp2` 计算2的幂次方

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `faceforward` 返回表面法线朝向

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `floatBitsToInt` 将浮点数转换为带符号整数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `floatBitsToUint` 将浮点数转换为无符号整数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `floor` 返回小于等于输入值的最大整数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `fract` 返回输入值的小数部分

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `fwidth` 返回函数对输入值的x和y方向导数的绝对值之和

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_FragCoord` 获取像素坐标信息

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_FragDepth` 获取像素深度值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_FrontFacing` 判断面的方向

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_InstanceID` 获取实例ID

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_PointCoord` 获取点的纹理坐标

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_PointSize` 获取点的大小

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_Position` 获取顶点位置

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `gl_VertexID` 获取顶点ID

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `greaterThan` 比较两个向量的大小

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `greaterThanEqual` 比较两个向量的大小

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `intBitsToFloat` 转换整型位表示的浮点数为单精度浮点数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `inverse` 求逆矩阵

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `inversesqrt` 求倒数的平方根

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `isinf` 判断浮点数是否为正或负无穷大

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `isnan` 判断浮点数是否为NaN

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `length` 返回向量长度

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `lessThan` 逐元素比较两个向量并返回bool向量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `lessThanEqual` 逐元素比较两个向量并返回bool向量，小于或等于返回true

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `log` 计算以e为底的对数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `log2` 计算以2为底的对数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `matrixCompMult` Matrix元素逐一相乘

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `max` 返回两个数的较大值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `min` 返回两个数的较小值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `mix` 线性混合两个值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `mod` 计算浮点数除法的余数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `modf` 返回浮点数的整数和小数部分

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `normalize` 向量单位化

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `not` 按位求反

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `notEqual` 按位不等

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `outerProduct` 向量外积

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `packHalf2x16` 将两个浮点数压缩成半精度

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `packSnorm2x16` 将两个浮点数压缩成符号化半精度

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `packUnorm2x16` 将两个浮点数压缩成无符号半精度

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `pow` 幂函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `radians` 角度转弧度

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `reflect` 计算反射向量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `refract` 计算折射向量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `round` 四舍五入

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `roundEven` 根据奇偶性舍入

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `sign` 符号函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `sin` 正弦函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `sinh` 双曲正弦函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `smoothstep` 平滑阶梯函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `sqrt` 平方根

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `step` 阶梯函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `tan` 正切函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `tanh` 双曲正切函数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `texelFetch` 获取纹素的颜色值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `texelFetchOffset` 获取偏移量纹素的颜色值

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `texture` 对纹理进行采样

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureGrad` 对纹理进行采样，包括Mipmap层级计算

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureGradOffset` 对纹理进行采样，包括Mipmap层级计算和偏移量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureLod` 根据给定的Mipmap层级对纹理进行采样

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureLodOffset` 根据给定的Mipmap层级和偏移量对纹理进行采样

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureOffset` 对纹理进行采样，包括偏移量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureProj` 对投影纹理进行采样

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureProjGrad` 对投影纹理进行采样，包括Mipmap层级计算

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureProjGradOffset` 对投影纹理进行采样，包括Mipmap层级计算和偏移量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureProjLod` 根据给定的Mipmap层级对投影纹理进行采样

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureProjLodOffset` 根据给定的Mipmap层级和偏移量对投影纹理进行采样

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureProjOffset` 对投影纹理进行采样，包括偏移量

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `textureSize` 获取纹理的尺寸

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `transpose` 矩阵转置

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `trunc` 向零舍入取整

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `uintBitsToFloat` 将32位无符号整数解释为浮点数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `unpackHalf2x16` 解压缩单精度浮点数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `unpackSnorm2x16` 解压缩单精度浮点数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项

### `unpackUnorm2x16` 解压缩单精度浮点数

##### 函数描述

```c

```

##### 参数x: 



##### 返回值


##### 示例

```c

```

##### 注意事项
